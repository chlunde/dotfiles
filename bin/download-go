#!/bin/bash
v=1.12.6
hash=dbcf71a3c1ea53b8d54ef1b48c85a39a6c9a935d01fc8291ff2b92028e59913c

if [[ "$(go version 2> /dev/null)" == "go version go$v "* ]]
then
    echo "Already updated"
    exit 0
fi

mkdir -p ~/Downloads/
curl -o ~/Downloads/go$v.linux-amd64.tar.gz https://storage.googleapis.com/golang/go$v.linux-amd64.tar.gz

if [[ "$(sha256sum ~/Downloads/go$v.linux-amd64.tar.gz | cut -d ' ' -f1)" != "$hash" ]]
then
	echo "Checksum mismatch"
	exit 1
fi

mkdir -p ~/opt
rm -Rf ~/opt/go
tar -C ~/opt -xzf ~/Downloads/go$v.linux-amd64.tar.gz
